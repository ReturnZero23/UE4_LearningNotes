# Pak 包的使用及其实现原理解析

## 背景

在 Unreal Engine 4 中通常对资源的打包方式是使用 pak 包，把一些相同的资源打在一个相同的 pak 包中，方便程序动态的下载和动态的加载。因为在使用 UE4 提供的这套打包方式遇到了一些坑，所以就此做一些记录，希望大家遇到的时候能绕过这些坑。

## 常规的使用方式

- 打包项目的时候勾选 “use pak” 选项，程序会自动把除 exe 文件之外的文件都打成一个 pak 包。
- 如果你想要分块打包有两种方案：
  - 1.使用编辑器 Primary Asset Labels 能够将资源指定 chunk id，这样打包的时候就能打到不同的 pak 包中。
  - 2.使用 UnrealPak.exe 自己打包 pak 包。这种方式非常的灵活，可以写一个脚本进行处理。UnrealPak 本身是一个命令行程序，使用的参数比较简单，网上也有很多其他人写的总结。使用的方式类似 zip。UnrealPak 也提供了压缩、签名、加密等功能。

## 什么是 Pak 包

类似于一个 zip 包，把一组文件打包成一个文件。UnrealPak 在打包一个目录的时候会吧所有文件的公共路径作为 pak 文件的挂载点。